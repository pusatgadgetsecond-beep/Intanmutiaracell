<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Intan Mutiara Cell - Marketplace</title>
  <style>
    :root{
      --shopee:#28ceff;   /* warna utama (Shopee) */
      --price-color:#ee4d2d; /* warna harga (ubah sesuai keinginan) */
      --neutral-1:#fff;
      --neutral-2:#f6f6f6;
      --border:#e5e5e5;
      --text-1:#111;
      --text-2:#666;
      --radius:12px;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:"Poppins",sans-serif;background:var(--neutral-2);color:var(--text-1)}
    img{max-width:100%;display:block}

    /* ================= Header ================= */
    .topbar{
      position:sticky;top:0;z-index:1000;
      background:var(--shopee);padding:10px 12px;
      display:flex;gap:10px;align-items:center;
    }
    .topbar__back,.topbar__more{
      width:24px;height:24px;border-radius:50%;
      background:rgba(255,255,255,.2)
    }
    .topbar__search{flex:1}
    .topbar__search input{
      width:100%;height:36px;border:none;border-radius:999px;
      padding:0 14px;font-size:.95rem;outline:none
    }

    /* ================= Store header ================= */
    .store-hero {
      position: relative;
      padding: 40px 12px 20px;
      background: url('Intan Mutiara Cell.jpg') center/cover no-repeat;
    }
    .store-hero::before {
      content: "";
      position: absolute;inset: 0;
      background: rgba(255,255,255,0.3);
      backdrop-filter: blur(3px);
    }
    .store-card{
      position: relative;
      border-radius:16px;
      padding:12px;
      display:flex;align-items:center;gap:12px;
      z-index:1;
      background:transparent;
    }
    .store-card__logo{
      width:56px;height:56px;border-radius:50%;overflow:hidden;
      border:2px solid #fff
    }
    .store-card__meta{flex:1}
    .store-card__name{
      font-weight:700;
      font-size:1.05rem;
      color:var(--text-1);
    }
    .store-card__stat{color:#555;font-size:.85rem;margin-top:2px}

    /* tombol mirip Shopee */
    .store-card__actions{
      display:flex;
      flex-direction:column;
      gap:6px;
    }
    .btn{
      padding:8px 14px;
      border-radius:8px;
      font-weight:600;
      font-size:.88rem;
      cursor:pointer;
      border:1px solid var(--border);
      text-align:center;
    }
    .btn--follow{
      background:var(--shopee);
      color:#fff;
      border:none;
    }
    .btn--chat{
      background:#fff;
      color:var(--text-1);
    }

    /* ================= Tabs ================= */
    .tabs-wrap{background:var(--neutral-2);padding:8px 0}
    .tabs{
      background:#fff;border-radius:16px 16px 0 0;
      display:flex;gap:8px;padding:0 12px;
      border-bottom:1.5px solid var(--border)
    }
    .tab{flex:0 0 auto;padding:14px 6px;margin:0 10px;
      color:#555;font-weight:600;text-decoration:none;position:relative}
    .tab.active{color:var(--shopee)}
    .tab.active::after{
      content:"";position:absolute;left:0;right:0;bottom:-1px;
      height:3px;border-radius:3px;background:var(--shopee)
    }

    /* ================= Section ================= */
    .section{padding:12px;background:#fff;margin-top:8px}
    .section__head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
    .section__title{font-size:1.02rem;font-weight:700}
    .see-all{color:var(--shopee);text-decoration:none;font-weight:600;font-size:.9rem}

    /* ================= Horizontal scroll ================= */
    .scroller{display:flex;gap:10px;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:6px}
    .scroller::-webkit-scrollbar{display:none}
    .scroller > *{flex:0 0 auto;scroll-snap-align:start}

    /* ================= Category ================= */
    .kategori-scroller{display:flex;gap:14px;overflow-x:auto;padding:6px 2px 8px}
    .kategori-item{flex:0 0 auto;text-align:center;cursor:pointer}
    .kategori-item img{width:64px;height:64px;border-radius:50%;background:#fafafa;border:1px solid var(--border)}
    .kategori-item span{display:block;margin-top:6px;font-size:.85rem;color:#333}

    /* ================= Product card ================= */
    .card{background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden;width:150px}
    .card__img{position:relative}
    .card__img img{width:100%;aspect-ratio:1/1;object-fit:cover}
    .badge{position:absolute;left:8px;top:8px;background:var(--shopee);color:#fff;border-radius:4px;font-size:.72rem;padding:2px 6px;font-weight:700}
    .card__body{padding:8px;display:flex;flex-direction:column;gap:6px}
    .card__title{font-size:.85rem;height:2.5em;overflow:hidden;color:#333}
    .price{color:var(--price-color);font-weight:800;font-size:.9rem}
    .meta{display:flex;gap:8px;align-items:center;color:#777;font-size:.75rem}
    .chip{display:inline-flex;gap:4px;align-items:center;padding:2px 6px;border:1px solid var(--border);border-radius:6px}
    .chip .star::before{content:"★";color:#ffb400;font-size:.9rem}

    /* ================= Grid ================= */
    .grid{display:grid;gap:12px}
    .grid--2col{grid-template-columns:repeat(2,1fr)}

    /* ================= Footer ================= */
    footer{background:#fff;border-top:1px solid var(--border);padding:18px;color:#666;text-align:center}
  </style>
</head>
<body>

  <!-- ========== TOP BAR ========== -->
  <div class="topbar">
    <div class="topbar__back"></div>
    <div class="topbar__search"><input placeholder="Cari di Toko"></div>
    <div class="topbar__more"></div>
  </div>

  <!-- ========== STORE HEADER ========== -->
  <div class="store-hero">
    <div class="store-card">
      <div class="store-card__logo"><img src="Intan Mutiara.jpg" alt="Logo Toko"></div>
      <div class="store-card__meta">
        <div class="store-card__name">INTAN MUTIARA CELL</div>
        <div class="store-card__stat">⭐ 4.8 | 139,3RB Pengikut</div>
      </div>
      <div class="store-card__actions">
        <button class="btn btn--follow">Ikuti</button>
        <button class="btn btn--chat" onclick="openChat()">Chat</button>
      </div>
    </div>
  </div>

  <!-- ========== TABS ========== -->
  <div class="tabs-wrap">
    <div class="tabs">
      <a class="tab active" data-tab="toko" href="#">Toko</a>
      <a class="tab" data-tab="produk" href="#">Produk</a>
      <a class="tab" data-tab="kategori" href="#">Kategori</a>
    </div>
  </div>

  <!-- ========== CONTENT ========== -->
  <main id="tabContent"></main>

  <!-- ========== FOOTER ========== -->
  <footer>
    Intan Mutiara, Jl. Pemuda No.27-31, Surabaya • WA: 0896-5342-9419
  </footer>

  <script>
    const apiURL = "https://script.google.com/macros/s/AKfycbwhEx_j7s685ef89RppbIwjgwVePZyldnx8jC33lchkmirpWtr4Pm1sqhk5L7NjH_M6/exec";
    let products=[];

    function createProductCard(p){
      const v=p.variants?.[0];
      const img=p.images?.[0]||'https://via.placeholder.com/300?text=No+Image';
      const price=v?Number(v.price).toLocaleString("id-ID"):"-";
      return `
        <div class="card">
          <div class="card__img"><img src="${img}" alt="${p.title}"><span class="badge">Diskon 99%</span></div>
          <div class="card__body">
            <div class="card__title">${p.title}</div>
            <div class="price">Rp ${price}</div>
            <div class="meta">
              <span class="chip"><i class="star"></i> ${p.rating||"4.8"}</span>
              <span class="sold">Terjual ${p.sold||"100+"}</span>
            </div>
          </div>
        </div>`;
    }

    async function fetchProducts(){
      const res=await fetch(apiURL);
      products=await res.json();
      renderToko();
    }

    function renderToko(){
      const tab=document.getElementById("tabContent");
      tab.innerHTML=`
        <section class="section">
          <div class="section__head"><div class="section__title">Kamu Mungkin Suka</div></div>
          <div class="scroller">${products.slice(0,15).map(createProductCard).join("")}</div>
        </section>
        <section class="section">
          <img src="Intan Mutiara Cell.jpg" style="width:100%;border-radius:12px">
        </section>
        <section class="section">
          <div class="section__head"><div class="section__title">Penawaran Terbaik</div></div>
          <div class="scroller">${products.slice(15,30).map(createProductCard).join("")}</div>
        </section>
        <section class="section">
          <div class="section__head"><div class="section__title">Produk Baru</div></div>
          <div class="scroller">${products.slice(30,34).map(createProductCard).join("")}</div>
        </section>
        <section class="section">
          <div class="section__head"><div class="section__title">Kategori</div></div>
          <div class="kategori-scroller">
            ${["iPhone","Oppo","Vivo","Samsung","Xiaomi","Realme","Infinix","iTel","Tecno","Huawei","ZTE","Nokia","Asus"]
              .map(c=>`<div class="kategori-item" onclick="renderByCategory('${c}')"><img src="${c}.png"><span>${c}</span></div>`).join("")}
          </div>
        </section>
        <section class="section">
          <div class="section__head"><div class="section__title">Penjualan Tertinggi</div></div>
          <div class="grid grid--2col">${products.slice(34,40).map(createProductCard).join("")}</div>
        </section>
        <section class="section">
          <div class="section__head"><div class="section__title">Rekomendasi Toko</div></div>
          <div class="grid grid--2col">${products.slice(40,46).map(createProductCard).join("")}</div>
        </section>`;
    }

    function renderProduk(){
      document.getElementById("tabContent").innerHTML=
        `<section class="section"><div class="section__head"><div class="section__title">Semua Produk</div></div>
        <div class="grid grid--2col">${products.map(createProductCard).join("")}</div></section>`;
    }

    function renderKategori(){
      document.getElementById("tabContent").innerHTML=
        `<section class="section"><div class="section__head"><div class="section__title">Semua Kategori</div></div>
        <div class="kategori-scroller">
          ${["iPhone","Oppo","Vivo","Samsung","Xiaomi","Realme","Infinix","iTel","Tecno","Huawei","ZTE","Nokia","Asus"]
            .map(c=>`<div class="kategori-item" onclick="renderByCategory('${c}')"><img src="${c}.png"><span>${c}</span></div>`).join("")}
        </div></section>`;
    }

    function renderByCategory(cat){
      const filtered=products.filter(p=>p.title.toLowerCase().includes(cat.toLowerCase()));
      document.getElementById("tabContent").innerHTML=
        `<section class="section"><div class="section__head"><div class="section__title">${cat}</div></div>
        <div class="grid grid--2col">${filtered.length?filtered.map(createProductCard).join(""):"<p>Tidak ada produk</p>"}</div></section>`;
    }

    // Tab click
    document.querySelectorAll(".tab").forEach(tab=>{
      tab.addEventListener("click",e=>{
        e.preventDefault();
        document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
        tab.classList.add("active");
        if(tab.dataset.tab==="toko") renderToko();
        if(tab.dataset.tab==="produk") renderProduk();
        if(tab.dataset.tab==="kategori") renderKategori();
      });
    });

    // Swipe gesture (mobile)
    let startX=0;
    document.addEventListener("touchstart",e=>{startX=e.touches[0].clientX});
    document.addEventListener("touchend",e=>{
      let endX=e.changedTouches[0].clientX;
      let diff=endX-startX;
      if(Math.abs(diff)>50){
        const tabs=Array.from(document.querySelectorAll(".tab"));
        let activeIndex=tabs.findIndex(t=>t.classList.contains("active"));
        if(diff<0 && activeIndex<tabs.length-1){tabs[activeIndex+1].click()}
        if(diff>0 && activeIndex>0){tabs[activeIndex-1].click()}
      }
    });

    function openChat(){alert("Fitur chat pembeli & seller akan ditambahkan di sini.")}
    fetchProducts();
  </script>
</body>
</html>
