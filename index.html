<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Intan Mutiara Cell - Marketplace</title>
<style>
:root{
  --shopee:#28ceff;
  --price-color:#ee4d2d;
  --neutral-1:#fff;
  --neutral-2:#f6f6f6;
  --border:#e5e5e5;
  --text-1:#111;
  --text-2:#666;
  --radius:12px;
}
*{box-sizing:border-box}
body{margin:0;font-family:"Poppins",sans-serif;background:var(--neutral-2);color:var(--text-1);padding-bottom:70px} /* padding untuk bottom nav */
img{max-width:100%;display:block}

/* Container */
.app-container{
  width:100%;
  max-width:1200px;
  margin:0 auto;
  background:var(--neutral-2);
  min-height:100vh;
}

/* Header atas */
.topbar{position:sticky;top:0;z-index:1000;background:var(--shopee);padding:10px 12px;display:flex;gap:10px;align-items:center}
.topbar__back,.topbar__more{width:24px;height:24px;border-radius:50%;background:rgba(255,255,255,.2)}
.topbar__search{flex:1}
.topbar__search input{width:100%;height:36px;border:none;border-radius:999px;padding:0 14px;font-size:.95rem;outline:none}

/* Sampul toko */
.store-hero{position:relative;padding:40px 12px 20px;background:url('Intan Mutiara Cell.jpg') center/cover no-repeat}
.store-hero::before{content:"";position:absolute;inset:0;background:rgba(255,255,255,0.3);backdrop-filter:blur(3px)}
.store-card{position:relative;border-radius:16px;padding:12px;display:flex;align-items:center;gap:12px;z-index:1;background:transparent}
.store-card__logo{width:56px;height:56px;border-radius:50%;overflow:hidden;border:2px solid #fff}
.store-card__meta{flex:1}
.store-card__name{font-weight:700;font-size:1.05rem;color:var(--text-1)}
.store-card__stat{color:#555;font-size:.85rem;margin-top:2px}
.store-card__actions{display:flex;flex-direction:column;gap:6px}
.btn{padding:8px 14px;border-radius:8px;font-weight:600;font-size:.88rem;cursor:pointer;border:1px solid var(--border);text-align:center}
.btn--follow{background:var(--shopee);color:#fff;border:none}
.btn--chat{background:#fff;color:var(--text-1)}

/* Tabs */
.tabs-wrap{background:var(--neutral-2);padding:8px 0}
.tabs{background:#fff;border-radius:16px 16px 0 0;display:flex;gap:8px;padding:0 12px;border-bottom:1.5px solid var(--border)}
.tab{flex:0 0 auto;padding:14px 6px;margin:0 10px;color:#555;font-weight:600;text-decoration:none;position:relative}
.tab.active{color:var(--shopee)}
.tab.active::after{content:"";position:absolute;left:0;right:0;bottom:-1px;height:3px;border-radius:3px;background:var(--shopee)}

/* Section */
.section{padding:12px;background:#fff;margin-top:8px}
.section__head{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.section__title{font-size:1.02rem;font-weight:700}
.see-all{color:var(--shopee);text-decoration:none;font-weight:600;font-size:.9rem}

/* Scroller */
.scroller{display:flex;gap:10px;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;padding-bottom:6px}
.scroller::-webkit-scrollbar{display:none}
.scroller > *{flex:0 0 150px;scroll-snap-align:start}

/* Kategori */
.kategori-scroller{display:flex;gap:14px;overflow-x:auto;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;padding:6px 2px 8px}
.kategori-scroller::-webkit-scrollbar{display:none}
.kategori-item{flex:0 0 auto;text-align:center;cursor:pointer;scroll-snap-align:center}
.kategori-item img{width:64px;height:64px;border-radius:50%;background:#fafafa;border:1px solid var(--border)}
.kategori-item span{display:block;margin-top:6px;font-size:.85rem;color:#333}

/* Produk card */
.card{background:#fff;border:1px solid var(--border);border-radius:12px;overflow:hidden;flex-shrink:0;display:flex;flex-direction:column;text-decoration:none;color:inherit}
.card__img{width:100%;aspect-ratio:1/1;overflow:hidden;position:relative}
.card__img img{width:100%;height:100%;object-fit:cover}
.badge{position:absolute;left:8px;top:8px;background:var(--shopee);color:#fff;border-radius:4px;font-size:.72rem;padding:2px 6px;font-weight:700}
.card__body{padding:8px;display:flex;flex-direction:column;gap:6px}
.card__title{font-size:.85rem;height:2.5em;overflow:hidden;color:#333}
.price{color:var(--price-color);font-weight:800;font-size:.9rem}
.meta{display:flex;gap:8px;align-items:center;color:#777;font-size:.75rem}
.chip{display:inline-flex;gap:4px;align-items:center;padding:2px 6px;border:1px solid var(--border);border-radius:6px}
.chip .star::before{content:"‚òÖ";color:#ffb400;font-size:.9rem}

/* Grid Produk */
.grid{display:grid;gap:12px}
.grid--2col{grid-template-columns:repeat(auto-fill, minmax(160px,1fr))}

/* Footer */
footer{background:#fff;border-top:1px solid var(--border);padding:18px;color:#666;text-align:center}

/* Bottom Navigation */
.bottom-nav{
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background:#fff;
  border-top:1px solid #e5e5e5;
  display:flex;
  justify-content:space-around;
  align-items:center;
  z-index:1000;
  box-shadow:0 -2px 6px rgba(0,0,0,0.08);
}
.nav-btn{
  background:none;
  border:none;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  font-size:.85rem;
  color:#555;
  cursor:pointer;
}
.nav-btn .icon{
  font-size:1.5rem;
  margin-bottom:2px;
}
.nav-btn.disabled{
  opacity:0.6;
  cursor:default;
}
.nav-btn:active{
  color: var(--shopee);
}
</style>
</head>
<body>
<div class="app-container">

  <!-- TOPBAR -->
  <div class="topbar">
    <div class="topbar__back"></div>
    <div class="topbar__search">
      <input id="searchBox" placeholder="Cari di Toko">
    </div>
    <div class="topbar__more"></div>
  </div>

  <!-- STORE HEADER -->
  <div class="store-hero">
    <div class="store-card">
      <div class="store-card__logo"><img src="Intan Mutiara.jpg" alt="Logo Toko"></div>
      <div class="store-card__meta">
        <div class="store-card__name">INTAN MUTIARA CELL</div>
        <div class="store-card__stat">‚≠ê 4.8 | 139,3RB Pengikut</div>
      </div>
      <div class="store-card__actions">
        <button class="btn btn--follow" onclick="followStore()">Ikuti</button>
        <button class="btn btn--chat" onclick="openChat()">Chat</button>
      </div>
    </div>
  </div>

  <!-- TABS -->
  <div class="tabs-wrap">
    <div class="tabs">
      <a class="tab active" data-tab="toko" href="#">Toko</a>
      <a class="tab" data-tab="produk" href="#">Produk</a>
      <a class="tab" data-tab="kategori" href="#">Kategori</a>
    </div>
  </div>

  <!-- CONTENT -->
  <main id="tabContent"></main>

  <!-- FOOTER -->
  <footer>
    Intan Mutiara, Jl. Pemuda No.27-31, Surabaya ‚Ä¢ WA: 0896-5342-9419
  </footer>

</div>

<!-- BOTTOM NAVIGATION -->
<div class="bottom-nav">
  <button class="nav-btn" id="homeBtn">
    <span class="icon">üè†</span>
    <span class="label">Home</span>
  </button>
  <button class="nav-btn" onclick="alert('Fitur Login/Daftar akan ditambahkan')">
    <span class="icon">üë§</span>
    <span class="label">Login/Daftar</span>
  </button>
</div>

<script>
const apiURL="https://script.google.com/macros/s/AKfycbwhEx_j7s685ef89RppbIwjgwVePZyldnx8jC33lchkmirpWtr4Pm1sqhk5L7NjH_M6/exec";
let products=[];

function followStore(){alert("Fitur ikuti Toko Akan Di Tambahkan Di Sini");}

function createProductCard(p){
  const v=p.variants?.[0];
  const img=p.images?.[0]||'https://via.placeholder.com/300?text=No+Image';
  const price=v?Number(v.price).toLocaleString("id-ID"):"-";
  return `
    <a href="detail.html?id=${p.id}" class="card">
      <div class="card__img"><img src="${img}" alt="${p.title}"><span class="badge">Diskon 99%</span></div>
      <div class="card__body">
        <div class="card__title">${p.title}</div>
        <div class="price">Rp ${price}</div>
        <div class="meta">
          <span class="chip"><i class="star"></i> ${p.rating||"4.8"}</span>
          <span class="sold">Terjual ${p.sold||"100+"}</span>
        </div>
      </div>
    </a>`;
}

async function fetchProducts(){
  const res=await fetch(apiURL);
  products=await res.json();
  renderToko();
}

function renderToko(){
  const tab=document.getElementById("tabContent");
  tab.innerHTML=`
    <section class="section">
      <div class="section__head"><div class="section__title">Kamu Mungkin Suka</div></div>
      <div class="scroller">${products.slice(0,15).map(createProductCard).join("")}</div>
    </section>

    <section class="section" style="padding:0;margin-top:8px">
  <div style="
    background:url('Intan Mutiara Cell 220.jpg') center/cover no-repeat;
    width:100%;
    height:140px;
    border-radius:12px;">
  </div>
</section>

    <section class="section">
      <div class="section__head"><div class="section__title">Penawaran Terbaik</div></div>
      <div class="scroller">${products.slice(15,30).map(createProductCard).join("")}</div>
    </section>

    <section class="section">
      <div class="section__head"><div class="section__title">Produk Baru</div></div>
      <div class="scroller">${products.slice(30,34).map(createProductCard).join("")}</div>
    </section>

    <section class="section">
      <div class="section__head"><div class="section__title">Kategori</div></div>
      <div class="kategori-scroller">
        ${["iPhone","Oppo","Vivo","Samsung","Xiaomi","Realme","Infinix","iTel","Tecno","Huawei","ZTE","Nokia","Asus"]
          .map(c=>`<div class="kategori-item" onclick="renderByCategory('${c}')"><img src="${c}.png"><span>${c}</span></div>`).join("")}
      </div>
    </section>

    <section class="section">
      <div class="section__head"><div class="section__title">Penjualan Tertinggi</div></div>
      <div class="grid grid--2col">${products.slice(34,40).map(createProductCard).join("")}</div>
    </section>

    <section class="section">
      <div class="section__head"><div class="section__title">Rekomendasi Toko</div></div>
      <div class="grid grid--2col">${products.slice(40,46).map(createProductCard).join("")}</div>
    </section>`;
}

function renderProduk(){
  document.getElementById("tabContent").innerHTML=
    `<section class="section"><div class="section__head"><div class="section__title">Semua Produk</div></div>
    <div class="grid grid--2col">${products.map(createProductCard).join("")}</div></section>`;
}

function renderKategori(){
  document.getElementById("tabContent").innerHTML=
    `<section class="section"><div class="section__head"><div class="section__title">Semua Kategori</div></div>
    <div class="kategori-scroller">
      ${["iPhone","Oppo","Vivo","Samsung","Xiaomi","Realme","Infinix","iTel","Tecno","Huawei","ZTE","Nokia","Asus"]
        .map(c=>`<div class="kategori-item" onclick="renderByCategory('${c}')"><img src="${c}.png"><span>${c}</span></div>`).join("")}
    </div></section>`;
}

function renderByCategory(cat){
  const filtered=products.filter(p=>p.title.toLowerCase().includes(cat.toLowerCase()));
  document.getElementById("tabContent").innerHTML=
    `<section class="section"><div class="section__head"><div class="section__title">${cat}</div></div>
    <div class="grid grid--2col">${filtered.length?filtered.map(createProductCard).join(""):"<p>Tidak ada produk</p>"}</div></section>`;
}

// Tab navigation
document.querySelectorAll(".tab").forEach(tab=>{
  tab.addEventListener("click",e=>{
    e.preventDefault();
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    tab.classList.add("active");
    if(tab.dataset.tab==="toko") renderToko();
    if(tab.dataset.tab==="produk") renderProduk();
    if(tab.dataset.tab==="kategori") renderKategori();
  });
});

// Pencarian
document.getElementById("searchBox").addEventListener("input",e=>{
  const keyword=e.target.value.toLowerCase();
  const filtered=products.filter(p=>p.title.toLowerCase().includes(keyword));
  document.getElementById("tabContent").innerHTML=
    `<section class="section"><div class="section__head"><div class="section__title">Hasil Pencarian</div></div>
    <div class="grid grid--2col">${filtered.length?filtered.map(createProductCard).join(""):"<p>Tidak ada produk</p>"}</div></section>`;
});

function openChat(){alert("Fitur chat pembeli & seller akan ditambahkan di sini.")}

// Tombol Home logic
const homeBtn = document.getElementById("homeBtn");
if(window.location.pathname.endsWith("index.html") || window.location.pathname === "/"){
  homeBtn.classList.add("disabled"); // Tidak aktif
} else {
  homeBtn.addEventListener("click", ()=> window.location.href='index.html');
}

fetchProducts();
</script>
</body>
</html>
